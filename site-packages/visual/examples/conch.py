#!/usr/bin/env python
#coding:utf-8
#from visual import *
""" Draw and display a conch shell
Kadir Haldenbilen, Feb. 2011"""

from __future__ import print_function, division
import visual as vp
import math

vp.scene.height = vp.scene.width = 800
vp.scene.center = (0.3, -2.4, 0)

def spiral(nloop=1, tightness=1.0, dirctn=1.0, scale=1.0):
    """ Draw a spiral."""
    spr = []
    scale = []
    clrs = []
    #zd = 0.01
    for turn in range(1, 1024*nloop, 16):
        turn *= 0.01
        x_val = tightness/10.0 * turn * math.cos(turn)*dirctn
        y_val = tightness/10.0 * turn * math.sin(turn)
        sc_val = math.sqrt(x_val*x_val+y_val*y_val)
        z_val = turn/7.0
        spr.append((x_val, y_val, z_val))
        clr = vp.vector((z_val*math.cos(turn), abs(math.sin(turn)),
                         abs(math.cos(turn*2)))).norm()
        clrs.append(clr)
        scale.append((sc_val, sc_val))
    return spr, scale, clrs

PATH, SCALE, CLRS = spiral(nloop=2, tightness=0.8)
ELPS = vp.shapes.circle(radius=0.69, thickness=0.01)

EE = vp.extrusion(frame=vp.frame(), shape=ELPS, pos=PATH, scale=SCALE, color=CLRS,
                  material=vp.materials.marble)
EE.frame.rotate(angle=math.pi/2)

